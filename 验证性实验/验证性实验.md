<h1 align="center">验证性实验</h1>

## 简介：

​	本部分共有 8 个实验，实验 1～7 使用 `Cmder` 在命令行窗口完成，实验 8 使用浏览器完成。



## ipconfig

​	✍ `ipconfig` 是微软操作系统的计算机上用来控制网络连接的一个命令行工具。它的主要用来显示当前网络连接的配置信息（`/all` 参数）。

### 实作一

​	使用 `ipconfig/all` 查看**自己**计算机的网络配置，尽可能明白每行的意思，特别注意 `IP` 地址、子网掩码 `Subnet Mask`、网关 `Gateway`。

#### 	结果：

![image-20211208083847539](.\res\image-20211208083847539.png)

​	![image-20211208084105530](.\res\image-20211208084105530.png)

### 实作二

​	使用 `ipconfig/all` 查看**旁边**计算机的网络配置，看看有什么异同。

#### 结果：

​	![image-20211208084517658](.\res\image-20211208084517658.png)

### 问题一

​	你的计算机和旁边的计算机是否处于同一子网，为什么？

​		**答：**处于同一子网，因为两台计算机的子网掩码相同。



## ping

​	✍ `PING` （Packet Internet Groper），因特网包探索器，用于测试网络连接量的程序 。`ping` 是工作在 TCP/IP 网络体系结构中应用层的一个服务命令， 主要是向特定的目的主机发送 ICMP（Internet Control Message Protocol 因特网报文控制协议）Echo 请求报文，测试目的站是否可达及了解其有关状态。

### 实作一

​	要测试到某计算机如 重庆交通大学 Web 服务器的连通性，可以使用 `ping www.cqjtu.edu.cn` 命令，也可直接使用 IP 地址。

#### 结果：

![image-20211208085411783](.\res\image-20211208085411783.png)

### 实作二

​	使用 `ping/?` 命令了解该命令的各种选项并实际使用。

#### 结果：

![image-20211208085729885](.\res\image-20211208085729885.png)

![image-20211208090050497](.\res\image-20211208090050497.png)

### 问题一

​	假设你不能 `ping` 通某计算机或 IP，但你确定该计算机和你之间的网络是连通的，那么可能的原因是什么？该如何处理能保证 `ping` 通？

​	**答：**当你的网络出现故障不能访问某计算机如 `14.215.177.39` (百度的 IP 地址之一 ) 时，我们一般可采用由近及远的连通性测试来确定问题所在。现假设你的 IP 是 `192.168.1.89`，你旁边计算机的 IP 是 `192.168.1.64`，网关的 IP 是 `192.168.1.1` ，那么过程如下：

1. `ping 127.0.0.1` ，测试自己计算机的状态，如果 OK，那么说明本机网络软件硬件工作正常，否则，问题在本机，检查本机 TCP/IP 配置即网卡状态等
2. `ping 192.168.1.64` ，测试到旁边计算机的连通性，如果OK，那么说明本子网内部工作正常，否则，问题在本机网络出口到交换机之间，检查本机网卡到交换机的连线等
3. `ping 192.168.1.1`，测试到网关的连通性，如果 OK，那么说明本子网出口工作正常，否则，问题在网关，这是你无能为力的事情，报告给网管
4. `ping 14.215.177.39`，测试到百度的连通性，如果 OK，那就 OK，否则，问题在网关以外，这也是你无能为力的事情，报告给网管或者李彦宏？

### 问题二

​	`ping` 这个程序曾经是有 bug 的，比如使对方缓冲区溢出导致死机，或死 `ping` 对方以达到耗费对方主机的系统和网络资源等，请查阅相关资料了解。

​	**答：**死亡之ping：因为以太网长度有限，IP包片段被分片。当一个IP包的长度超过以太网帧的最大尺寸（以太网头部和尾部除外）时，包就会被分片，作为多个帧来发送。接收端的机器提取各个分片，并重组为一个完整的IP包。这样，超大的包一旦出现，包当中的额外数据就会被写入其他正常区域。这很容易导致系统进入非稳定状态，是一种典型的缓存溢出攻击。对于第二种，采用不断地发送大量数据包耗尽对方网络资源，如今一般采用ddos攻击到达类似目的。



## tracert

​	✍ `TRACERT` (Trace Route 的组合缩写)，也称为路由追踪，该命令行程序可用于跟踪 Internet 协议 （IP） 数据包传送到目标地址时经过的路径。

### 实作一

​	要了解到某计算机如 [www.baidu.com](http://www.cqjtu.edu.cn/) 中间经过了哪些节点（路由器）及其它状态，可使用 `tracert www.baidu.com` 命令，查看反馈的信息，了解节点的个数。

可通过网站 [http://ip.cn](http://ip.cn/) 查看这些节点位于何处，是哪个公司的，大致清楚本机到百度服务器之间的路径。

#### 结果：

![image-20211208093350745](.\res\image-20211208093350745.png)

### 实作二

​	`ping.pe` 这个网站可以探测从全球主要的 ISP 到某站点如 [https://qige.io](https://qige.io/) 的线路状态，当然也包括各线路到该主机的路由情况。请使用浏览器访问 http://ping.pe/qige.io 进行了解。

#### 结果：

![image-20211208093814026](.\res\image-20211208093814026.png)

### 问题一

​	`tracert` 能告诉我们路径上的节点以及大致的延迟等信息，那么它背后的原理是什么？本问题可结合第二部分的 Wireshark 实验进行验证。

​	**答：**不断地发送递增的短TTL的ICMP包，直到指定的TTL恰好能到达目的站点，记录所有回复站点，就可以找到本地计算机到目的计算机所经过的站点。

### 问题二

​	在以上两个实作中，如果你留意路径中的节点，你会发现无论是访问百度还是棋歌教学网，路径中的第一跳都是相同的，甚至你应该发现似乎前几个节点都是相同的，你的解释是什么？

​	**答：**通过`ip.cn`查询第一个节点：![image-20211208113847268](.\res\image-20211208113847268.png)

可以发现该节点是内网IP，通过`ipconfig/all`命令，发现第一跳的节点是本地子网的网关：

![image-20211208114104054](.\res\image-20211208114104054.png)

这说明访问外部网络时，必须要经过当前子网的网关。

### 问题三

​	在追踪过程中，你可能会看到路径中某些节点显示为 * 号，这是发生了什么？

​	**答：**可能显示为*号节点的计算机禁止了Traceroute探测。



## ARP

​	✍ ARP（Address Resolution Protocol）即地址解析协议，是用于根据给定网络层地址即 IP 地址，查找并得到其对应的数据链路层地址即 MAC地址的协议。 ARP 协议定义在 1982 年的 RFC 826。

### 实作一

​	运行 `arp -a` 命令查看当前的 arp 缓存， 请留意缓存了些什么。然后 `ping` 一下你旁边的计算机 IP（注意，需保证该计算机的 IP 没有出现在 arp 缓存中，或者使用 `arp -d *` 先删除全部缓存），再次查看缓存，你会发现一些改变，请作出解释。

#### 结果：

​	![image-20211208115123120](.\res\image-20211208115123120.png)

![image-20211208120521261](.\res\image-20211208120521261.png)

​	说明与arp缓存表中没有的计算机通信时，源计算机会发送一个arp广播，目的计算机回复后以确定目的计算机的mac地址并记录在arp缓存表中。
